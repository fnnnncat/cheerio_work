<div id="cnblogs_post_body"><div class="cnblogs_Highlighter">
<pre class="brush:html;gutter:true;">&lt;button id=btnLoad&gt;load&lt;/button&gt;
&lt;button id=btnToggle style=&quot;display:none&quot;&gt;toggle&lt;/button&gt;
&lt;img id=img src=https://d262ilb51hltx0.cloudfront.net/freeze/max/30/1*0oCBXtKSgMEbBlDbvwqC6w.png?q=20 data-src=https://d262ilb51hltx0.cloudfront.net/max/800/1*0oCBXtKSgMEbBlDbvwqC6w.png /&gt;
</pre>
</div>
<p>&#x3000;&#x3000;</p>
<div class="cnblogs_Highlighter">
<pre class="brush:css;gutter:true;">img{
  display: block;
  width:800px;
  height:443px;
}
</pre>
</div>
<p>&#x3000;&#x3000;</p>
<div class="cnblogs_Highlighter">
<pre class="brush:javascript;gutter:true;">var src = img.src;
var rawSrc = img.getAttribute(&apos;data-src&apos;);

var loadImage = function(url, fn){
	var _img = new Image();
  _img.onload = function(){
  	fn(true);
  };
  _img.onerror = function(){
  	fn(false);
  };
  _img.src = url;
};

btnLoad.onclick = function(){
	btnLoad.textContent = &apos;loading&apos;;
  btnLoad.onclick = null;
  btnLoad.disabled = true;
  loadImage(rawSrc, function(success){
		btnLoad.textContent = success ? &apos;load success&apos; : &apos;load failed&apos;;
    btnToggle.style.display = &apos;&apos;;
    img.src = rawSrc;
  });
}

btnToggle.onclick = function(){
  img.src = img.src === src ? rawSrc : src;
};
</pre>
</div>
<p>&#x3000;&#x3000;</p></div>