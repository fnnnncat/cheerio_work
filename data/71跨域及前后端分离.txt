<div id="cnblogs_post_body"><p style="text-align: left;" align="center"><span style="font-size: 18px;">&#x6700;&#x8FD1;&#x603B;&#x7ED3;&#x4E86;&#x4E0B;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x8DE8;&#x57DF;&#x65B9;&#x6848;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x5927;&#x5BB6;&#x6709;&#x7528;&#xFF1A;</span></p>
<p>&#xA0;</p>
<p>&#xA0; &#xA0; &#xA0; &#x56E0;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5B9E;&#x65BD;&#x5B89;&#x5168;&#x9650;&#x5236;&#xFF0C;&#x51E1;&#x662F;&#x53D1;&#x9001;&#x8BF7;&#x6C42;url&#x7684;&#x534F;&#x8BAE;&#x3001;&#x57DF;&#x540D;&#x3001;&#x7AEF;&#x53E3;&#x4E09;&#x8005;&#x4E4B;&#x95F4;&#x4EFB;&#x610F;&#x4E00;&#x4E0E;&#x5F53;&#x524D;&#x9875;&#x9762;&#x5730;&#x5740;&#x4E0D;&#x540C;&#x5373;&#x4E3A;&#x8DE8;&#x57DF;&#x3002;&#x5173;&#x4E8E;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#xFF0C;&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x76EE;&#x524D;&#x5E38;&#x7528;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;:</p>
<p>&#xA0;</p>
<p>&#x4E00;&#x3001;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; JSONP&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;</p>
<p>1)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x7B80;&#x4ECB;</p>
<p align="left">JSONP(JSON with Padding)&#x662F;JSON&#x7684;&#x4E00;&#x79CD;&#x201C;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x201D;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x89E3;&#x51B3;&#x4E3B;&#x6D41;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x8DE8;&#x57DF;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p align="left">&#xA0;</p>
<p>2)&#xA0;&#xA0;&#xA0;&#xA0; &#x539F;&#x7406;</p>
<p>Script&#x7684;src &#x4E0D;&#x53D7;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x7684;&#x9650;&#xFF0C;JSONP&#x5C06;JSON&#x8BF7;&#x6C42;&#x5C01;&#x88C5;&#x8FDB;&#x4E00;&#x4E2A;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; JavaScript&#x51FD;&#x6570;&#xFF0C;&#x4F5C;&#x4E3A;&#x811A;&#x672C;&#x53D1;&#x56DE;&#x7ED9;&#x6D4F;&#x89C8;&#x5668;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x52A0;&#x8F7D;&#x65F6;&#xFF0C;&#x8BE5;&#x811A;&#x672C;&#x4E0D;&#x53D7;&#x9650;&#x4E8E;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF0C;&#x51FD;&#x6570;&#x5C31;&#x50CF;&#x5176;&#x4E2D;&#x7684;JSON&#x5BF9;&#x8C61;&#x4E00;&#x6837;&#x3002;</p>
<p>&#xA0;</p>
<p>3)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x4F7F;&#x7528;&#x65B9;&#x6CD5;</p>
<p>&#x975E;&#x7EDF;&#x4E00;&#x6846;&#x67B6;&#x9879;&#x76EE;</p>
<p align="left">&#xB2;&#xA0; &#x524D;&#x7AEF;&#xFF1A;</p>
<p align="left">&#x82E5;&#x4F7F;&#x7528;&#x975E;&#x6846;&#x67B6;&#x7684;&#x524D;&#x7AEF;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;jQuery&#x672C;&#x8EAB;&#x5C01;&#x88C5;&#x5728;ajax&#x4E2D;&#x7684;jsonp&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;success&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E2D;&#x53EF;&#x83B7;&#x53D6;&#x6B63;&#x5E38;json&#x6570;&#x636E;&#x4F53;&#x3002;</p>
<p align="left">&#xA0;</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">$.ajax({
    url: </span>&apos;http://192.168.95.248:18080/jsonp/testJsonp&apos;,<span style="color: #008000;">//</span><span style="color: #008000;">&#x8BF7;&#x6C42;&#x5730;&#x5740;</span>
    dataType: &quot;jsonp&quot;<span style="color: #000000;">,
    jsonp: </span>&quot;callback&quot;, <span style="color: #008000;">//</span><span style="color: #008000;">&#x4F20;&#x9012;&#x7ED9;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x6216;&#x9875;&#x9762;&#x7684;&#xFF0C;&#x7528;&#x4EE5;&#x83B7;&#x5F97;jsonp&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x540D;&#x7684;&#x53C2;&#x6570;&#x540D;(&#x9ED8;&#x8BA4;&#x4E3A;:callback)</span>
    success: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (data) {
        console.log(data)
    }
});

 </span></pre>
</div>
<p>&#xA0;</p>
<p>&#xB2;&#xA0; &#x670D;&#x52A1;&#x7AEF;&#xFF1A;</p>
<p>SpringMVC 4.1&#x5F00;&#x59CB;&#x52A0;&#x5165;&#x4E86;&#x5BF9;JSONP&#x7684;&#x652F;&#x6301;&#xFF0C;&#x6709;&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ol>
<li>&#x914D;&#x7F6E;&#x65B9;&#x5F0F;</li>
</ol>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">=&quot;org.springframework.web.servlet.view.json.MappingJackson2JsonView&quot;</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">=&quot;jsonpParameterNames&quot;</span><span style="color: #0000ff;">&gt;</span>

        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">set</span><span style="color: #0000ff;">&gt;</span>

            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>jsonp<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>

            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>callback<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>

        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">set</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&#xA0;</p>
<p>&#xA0;</p>
<ol>
<li>&#x7EE7;&#x627F;AbstractJsonpResponseBodyAdvice&#xFF0C;&#x5BF9;controller&#x505A;&#x5904;&#x7406;</li>
</ol>
<div class="cnblogs_code">
<pre>@ControllerAdvice(basePackages = &quot;com.github&quot;<span style="color: #000000;">)

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> JsonpAdvice <span style="color: #0000ff;">extends</span><span style="color: #000000;"> AbstractJsonpResponseBodyAdvice {

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> JsonpAdvice() {

        </span><span style="color: #0000ff;">super</span>(&quot;callback&quot;, &quot;jsonp&quot;<span style="color: #000000;">);

    }

}</span></pre>
</div>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;</p>
<p>&#xA0;<img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150121852-267709842.png" alt=""></p>
<p>&#xA0;</p>
<p>&#x4F18;&#x7F3A;&#x70B9;</p>
<ul>
<li>&#x4F18;&#x70B9;&#xFF1A;</li>
</ul>
<p>&#x517C;&#x5BB9;&#x6027;&#x597D;&#xFF0C;&#x9002;&#x914D;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x6D4F;&#x89C8;&#x5668;&#xFF08;&#x4FDD;&#x8BC1;&#x517C;&#x5BB9;&#x6027;IE8+&#xFF09;&#xFF0C;&#x4E0D;&#x9700;&#x8981;XMLHttpRequest&#x6216;ActiveX&#x7684;&#x652F;&#x6301;&#xFF1B;</p>
<ul>
<li>&#x7F3A;&#x70B9;&#xFF1A;</li>
</ul>
<p>a) &#xA0; &#xA0; &#xA0; &#xA0;&#x53EA;&#x652F;&#x6301;get&#x8BF7;&#x6C42;&#x800C;&#x4E0D;&#x652F;&#x6301;post&#x7B49;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x7684;HTTP&#x8BF7;&#x6C42;&#xFF1B;</p>
<p>b)&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;jsonp&#x5728;&#x8C03;&#x7528;&#x5931;&#x8D25;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x5404;&#x79CD;HTTP&#x72B6;&#x6001;&#x7801;&#xFF1B;</p>
<p>c)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#x8981;&#x786E;&#x5B9A;jsonp&#x7684;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x5931;&#x8D25;&#x5E76;&#x4E0D;&#x5BB9;&#x6613;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x6846;&#x67B6;&#x7684;&#x5B9E;&#x73B0;&#x90FD;&#x662F;&#x7ED3;&#x5408;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x6765;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x5224;&#x5B9A;&#xFF1B;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#x4E8C;&#x3001;Cors &#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;</p>
<p>1)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x7B80;&#x4ECB;</p>
<p>CORS&#x662F;&#x4E00;&#x4E2A;W3C&#x6807;&#x51C6;&#xFF0C;&#x5168;&#x79F0;&#x662F;&quot;&#x8DE8;&#x57DF;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&quot;&#xFF08;Cross-origin resource sharing&#xFF09;&#x3002;</p>
<p>&#x5B83;&#x5141;&#x8BB8;&#x6D4F;&#x89C8;&#x5668;&#x5411;&#x8DE8;&#x6E90;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53D1;&#x51FA;XMLHttpRequest&#x8BF7;&#x6C42;&#xFF0C;&#x4ECE;&#x800C;&#x514B;&#x670D;&#x4E86;AJAX&#x53EA;&#x80FD;&#x540C;&#x6E90;&#x4F7F;&#x7528;&#x7684;&#x9650;&#x5236;&#x3002;</p>
<p>2)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#x539F;&#x7406;</p>
<p>&#xA0; CORS&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#x662F;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;HTTP&#x8BF7;&#x6C42;&#x548C;&#x8FD4;&#x56DE;&#x4E2D;header&#xFF0C;&#x544A;&#x77E5;&#x6D4F;&#x89C8;&#x5668;&#x8BE5;&#x8BF7;&#x6C42;&#x662F;&#x5408;&#x6CD5;&#x7684;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x8DE8;&#x57DF;&#x3002;</p>
<p>&#xA0;</p>
<p>3)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</p>
<p>&#xB2;&#xA0; &#x524D;&#x7AEF;&#xFF1A;</p>
<p>&#x53D1;&#x9001;cors&#x8BF7;&#x6C42; &#xFF08;&#x5DF2;&#x7ECF;&#x5728;&#x6846;&#x67B6;&#x4E0A;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5C01;&#x88C5;,&#x53EF;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF09;</p>
<p>&#xA0;</p>
<div class="cnblogs_code">
<pre> cors: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (options) {
            </span><span style="color: #008000;">//</span><span style="color: #008000;">&#x8BBE;&#x7F6E;jquery &#x652F;&#x6301;&#x8DE8;&#x57DF;</span>
            $.support &amp;&amp; ($.support.cors = <span style="color: #0000ff;">true</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">var</span> config =<span style="color: #000000;"> $.extend({
                type: </span>&apos;post&apos;<span style="color: #000000;">,
                dataType: </span>&apos;json&apos;<span style="color: #000000;">,
                crossDomain: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">,

                contentType: </span>&quot;application/json; charset=utf-8&quot;<span style="color: #000000;">,
                beforeSend: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (xhr) {
                    xhr.overrideMimeType(</span>&quot;text/plain; charset=utf-8&quot;<span style="color: #000000;">);
                },
                xhrFields: {
                    withCredentials: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">
                }
            }, options);
            </span><span style="color: #0000ff;">if</span> ($.support &amp;&amp;<span style="color: #000000;"> $.support.msie) {
                </span><span style="color: #008000;">//</span><span style="color: #008000;">&#x4E3A;ie&#x6D4F;&#x89C8;&#x5668;&#x65F6;&#x589E;&#x52A0;xhrFields&#x914D;&#x7F6E;</span>
                config[&quot;xhrFields&quot;] = { withCredentials: <span style="color: #0000ff;">true</span><span style="color: #000000;"> };
            }
            $.ajax(config);
        },</span></pre>
</div>
<p>&#xA0;</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">var</span> corsConfig=<span style="color: #000000;"> {
    url: </span>&apos;http://192.168.95.248:18081/test/hello4?page=1&amp;size=10&apos;,<span style="color: #008000;">//</span><span style="color: #008000;">&#x8BF7;&#x6C42;&#x5730;&#x5740;</span>
    type: &apos;get&apos;, <span style="color: #008000;">//</span><span style="color: #008000;">&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;</span>
    dataType: &apos;json&apos;,<span style="color: #008000;">//</span><span style="color: #008000;">&#x9884;&#x671F;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</span>
    contentType: &quot;application/json; charset=utf-8&quot;,<span style="color: #008000;">//</span><span style="color: #008000;">&#x53D1;&#x9001;&#x4FE1;&#x606F;&#x81F3;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x5185;&#x5BB9;&#x7F16;&#x7801;&#x7C7B;&#x578B;</span>
    beforeSend: <span style="color: #0000ff;">function</span> (xhr) {    <span style="color: #008000;">//</span><span style="color: #008000;">&#x5728;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#x8C03;&#x7528;,&#x5E76;&#x4E14;&#x4F20;&#x5165;&#x4E00;&#x4E2A; XMLHttpRequest &#x4F5C;&#x4E3A;&#x53C2;&#x6570;</span>
        xhr.overrideMimeType(&quot;text/plain; charset=utf-8&quot;<span style="color: #000000;">);
    }
}
ajax.cors(corsConfig);</span></pre>
</div>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>IE8,9&#x4E0D;&#x517C;&#x5BB9;&#xFF0C;&#xA0;withCredentials &#x7279;&#x6027;&#x5728;IE9&#x53CA;&#x4EE5;&#x4E0B;&#x7684;&#x7248;&#x672C;&#x4E5F;&#x4E0D;&#x4F1A;&#x6709;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#xA0;</p>
<p>&#x89E3;&#x51B3;IE8,IE9&#x517C;&#x5BB9;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p>&#x65B9;&#x6848;&#x4E00;&#xFF1A;</p>
<p>&#x517C;&#x5BB9;IE8&#xFF0C;9&#x7684;&#x63D2;&#x4EF6;</p>
<p><a href="https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest">https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest</a></p>
<ul>
<li>&#x7F3A;&#x70B9;&#xFF1A;</li>
</ul>
<p>1.&#x53EA;&#x80FD;&#x662F;GET &#x6216;&#x662F;POST&#x8BF7;&#x6C42;&#xFF0C;&#x5728;&#x4F7F;&#x7528;post&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x603B;&#x662F;&#x53D1;&#x9001;&#x4E00;&#x4E2A; Content-Type &#x4E3A;text/plain&#xFF0C;&#x4E0D;&#x80FD;&#x8BBE;&#x7F6E;&#x5176;&#x4ED6;&#x8BF7;&#x6C42;&#x5934;&#x90E8;&#xFF1B;</p>
<p>2.&#x53EA;&#x80FD;&#x662F;HTTP&#x6216;&#x8005;HTTPS&#xFF0C;&#x5E76;&#x4E14;&#x53CC;&#x65B9;&#x7684;&#x534F;&#x8BAE;&#x9700;&#x8981;&#x4E00;&#x81F4;&#xFF1B;</p>
<p>3.&#x4E0D;&#x652F;&#x6301;Cookie&#x7684;&#x53D1;&#x9001;&#x548C;&#x63A5;&#x6536;&#xFF1B;</p>
<p>4.&#x65E0;&#x6CD5;&#x8BFB;&#x5199;&#x8FD4;&#x56DE;&#x5934;&#x90E8;&#xFF1B;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#x65B9;&#x6848;&#x4E8C;&#xFF1A;</p>
<p>&#xFF29;&#xFF25;&#x5F00;&#x542F;&#x8BBE;&#x7F6E;&#xFF1A;</p>
<p>&#xA0;<img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150135946-328866313.png" alt=""></p>
<p>&#xA0;</p>
<p>&#xA0;<img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150141727-2050585594.png" alt=""></p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xB2;&#xA0; &#x670D;&#x52A1;&#x7AEF;&#xFF1A;</p>
<p>&#xA0;3.1 &#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<p>&#xA0;config/*.properties</p>
<p>&#xA0;<img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150200258-431990222.png" alt=""></p>
<p>&#xA0;</p>
<p>web&#x6A21;&#x5757;application.properties</p>
<p>&#xA0;<img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150205321-598575288.png" alt=""></p>
<p>&#xA0;</p>
<p>3.2 &#x542F;&#x52A8;&#x7C7B;</p>
<p>&#x52A0;&#x5165;CORS&#x5904;&#x7406;Filter</p>
<p>&#xA0;<img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150306868-2126264386.png" alt=""></p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>b)&#xFF0C;&#x4F18;&#x7F3A;&#x70B9;</p>
<p>&#x4F18;&#x70B9;&#xFF1A;</p>
<p>CORS&#x652F;&#x6301;&#x6240;&#x6709;&#x7C7B;&#x578B;&#x7684;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x7684;ajax&#x5B9E;&#x73B0;&#x8DE8;&#x57DF;&#x3002;</p>
<p>&#xA0;</p>
<p>&#x7F3A;&#x70B9;&#xFF1A;</p>
<p>1&#xFF0C; &#x5B58;&#x5728;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#xFF0C;IE10&#x53CA;&#x4EE5;&#x4E0A;&#x624D;&#x53EF;&#x6B63;&#x5E38;&#x53D1;&#x9001;&#x8BF7;&#x6C42;</p>
<p>2&#xFF0C;&#xA0; Cookie&#x643A;&#x5E26;&#x95EE;&#x9898;&#xFF0C;IE8,9&#x7528;&#x6237;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x624D;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x6B63;&#x5E38;&#x7684;cookie&#x53D1;&#x9001;&#x548C;&#x63A5;&#x53D7;&#xFF1B;</p>
<p>&#xA0;<img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150227789-27609035.png" alt=""></p>
<p>&#xA0;</p>
<p>CORS&#x672C;&#x8EAB;&#x534F;&#x8BAE;&#x652F;&#x6301;IE8+ , Firefox5+, Chrome12+, Safari4+&#xFF0C;&#x79FB;&#x52A8;&#x7AEF;&#x51E0;&#x4E4E;&#x5168;&#x652F;&#x6301;&#x3002;&#x4F46;&#x5728;&#x8F83;&#x65E9;&#x7248;&#x672C;&#xFF08;8 &#x548C; 9&#xFF09;&#x4E2D;&#xFF0C;CORS &#x673A;&#x5236;&#x662F;&#x501F;&#x7531;&#xA0;XDomainRequest &#x5BF9;&#x8C61;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5728;IE8,9&#x4E2D;&#x4E5F;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;XmlHttpRequest2 &#x7684;&#x5C5E;&#x6027;&#x201D;withCredentials&#x201D;&#x643A;&#x5E26;cookie&#x3002;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#x4E09;&#x3001;&#x4F7F;&#x7528;Nginx&#x53CD;&#x5411;&#x4EE3;&#x7406;</p>
<p>1) &#x7B80;&#x4ECB;</p>
<p>nginx &#xA0;&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x7684;<a href="http://baike.baidu.com/item/HTTP" target="_blank">HTTP</a>&#x548C;<a href="http://baike.baidu.com/item/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86" target="_blank">&#x53CD;&#x5411;&#x4EE3;&#x7406;</a>&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7279;&#x70B9;&#x662F;&#x5360;&#x6709;&#x5185;&#x5B58;&#x5C11;&#xFF0C;&#x5E76;&#x53D1;&#x80FD;&#x529B;&#x5F3A;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;nginx&#x7684;&#x5E76;&#x53D1;&#x80FD;&#x529B;&#x786E;&#x5B9E;&#x5728;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x7F51;&#x9875;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x8868;&#x73B0;&#x8F83;&#x597D;&#x3002;</p>
<p>&#xA0;</p>
<p>2) &#x539F;&#x7406;</p>
<p>Nginx&#x53EF;&#x4F5C;&#x4E3A;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x628A;http&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x5C06;&#x672C;&#x5730;&#x4E00;&#x4E2A;url&#x524D;&#x7F00;&#x6620;&#x5C04;&#x5230;&#x8981;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x7684;web&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#xFF0C;&#x5C06;&#x5BF9;&#x540E;&#x7AEF;&#x8BF7;&#x6C42;&#x6620;&#x5C04;&#x5230;&#x67D0;&#x4E00;&#x8DEF;&#x5F84;&#xFF0C;&#x7136;&#x540E;&#x5728;Nginx&#x5185;&#x914D;&#x7F6E;&#x5C06;&#x8BE5;&#x8DEF;&#x5F84;&#x7684;&#x8BF7;&#x6C42;&#x91CD;&#x5199;&#x5230;&#x771F;&#x6B63;&#x7684;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x6240;&#x5728;&#x3002;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#xA0;</p>
<p>3) &#x914D;&#x7F6E;&#x65B9;&#x6CD5;</p>
<p>&#x8DE8;&#x57DF;&#x89E3;&#x51B3;&#x7684;&#x65B9;&#x6848;&#xFF1A;&#x7B80;&#x6613;&#x914D;&#x7F6E;&#x793A;&#x4F8B;&#xFF1A;</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">server {
    listen       9980;
    server_name  localhost;

    location / {
    #&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5730;&#x5740;
proxy_pass   http://localhost:8892; 
}
location ^~/apis {
rewrite  ^/apis/(.*)$ /$1 break;
#&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5730;&#x5740;
proxy_pass   http://localhost:18081;
}</span></pre>
</div>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#x5177;&#x4F53;&#x8BF4;&#x660E;:</p>
<p>&#x914D;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A;/apis&#x7684;&#x62E6;&#x622A;&#xFF0C;&#x628A;&#x6240;&#x6709;/apis/**&#x7684;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#xFF0C;&#x6BD4;&#x5982;/apis/hello4?page=1&amp;size=12&#x4F1A;&#x91CD;&#x5199;&#x5230;&#x771F;&#x6B63;&#x7684;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5730;&#x5740;http://localhost:18081/hello4?page=1&amp;size=12&#xFF0C;&#x7531;&#x4E8E;&#x524D;&#x540E;&#x7AEF;&#x90FD;&#x662F;&#x5728;localhost: 9980&#x4E0B;&#xFF0C;&#x5C31;&#x4E0D;&#x5B58;&#x5728;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#x3002;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p>&#x53C2;&#x8003;&#x8D44;&#x6E90;&#xFF1A;</p>
<p>https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</p>
<p>https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest</p>
<p>https://stackoverflow.com/questions/10232017/ie9-jquery-ajax-with-cors-returns-access-is-denied</p>
<p><a href="https://stackoverflow.com/questions/3362474/jquery-ajax-fails-in-ie-on-cross-domain-calls">https://stackoverflow.com/questions/3362474/jquery-ajax-fails-in-ie-on-cross-domain-calls</a></p>
<p>l&#xA0;</p>
<p>&#xA0;</p>
<p>&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#xFF0C;&#x76EE;&#x524D;&#x60F3;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x8FD8;&#x672A;&#x5B9E;&#x8DF5;</p>
<p><img src="http://images2015.cnblogs.com/blog/813419/201706/813419-20170627150402711-789465930.png" alt=""></p>
<p>&#xA0;</p></div>